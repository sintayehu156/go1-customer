import{c as p,f as I}from"./ListView.0c88aa81.js";import{D}from"./Dialog.7d7f87d0.js";import{_ as h,e as g,o as m,f as u,L as _,R as v,S as w,g as n,w as l,n as i,z as y,B as C,p as f,F as x}from"./vendor.72004f8a.js";import"./index.feff435d.js";const B={name:"InsertImage",props:["editor"],expose:["openDialog"],data(){return{addImageDialog:{url:"",file:null,show:!1}}},components:{Button:p,Dialog:D},methods:{openDialog(){this.addImageDialog.show=!0},onImageSelect(t){let e=t.target.files[0];!e||(this.addImageDialog.file=e,I(e).then(r=>{this.addImageDialog.url=r}))},addImage(t){this.editor.chain().focus().setImage({src:t}).run(),this.reset()},reset(){this.addImageDialog=this.$options.data().addImageDialog}}},S={class:"relative cursor-pointer rounded-lg bg-gray-100 py-1 focus-within:bg-gray-200 hover:bg-gray-200"},V={class:"absolute inset-0 select-none px-2 py-1 text-base"},b=["src"];function k(t,e,r,j,a,o){const d=g("Button"),c=g("Dialog");return m(),u(x,null,[_(t.$slots,"default",v(w({onClick:o.openDialog}))),n(c,{options:{title:"Add Image"},modelValue:a.addImageDialog.show,"onUpdate:modelValue":e[2]||(e[2]=s=>a.addImageDialog.show=s),onAfterLeave:o.reset},{"body-content":l(()=>[i("label",S,[i("input",{type:"file",class:"w-full opacity-0",onChange:e[0]||(e[0]=(...s)=>o.onImageSelect&&o.onImageSelect(...s)),accept:"image/*"},null,32),i("span",V,y(a.addImageDialog.file?"Select another image":"Select an image"),1)]),a.addImageDialog.url?(m(),u("img",{key:0,src:a.addImageDialog.url,class:"mt-2 w-full rounded-lg"},null,8,b)):C("",!0)]),actions:l(()=>[n(d,{variant:"solid",onClick:e[1]||(e[1]=s=>o.addImage(a.addImageDialog.url))},{default:l(()=>e[3]||(e[3]=[f(" Insert Image ")])),_:1}),n(d,{onClick:o.reset},{default:l(()=>e[4]||(e[4]=[f(" Cancel ")])),_:1},8,["onClick"])]),_:1},8,["modelValue","onAfterLeave"])],64)}var F=h(B,[["render",k]]);export{F as default};
