var U=Object.defineProperty,M=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var L=(s,e,a)=>e in s?U(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,D=(s,e)=>{for(var a in e||(e={}))Q.call(e,a)&&L(s,a,e[a]);if(V)for(var a of V(e))j.call(e,a)&&L(s,a,e[a]);return s},T=(s,e)=>M(s,E(e));var B=(s,e,a)=>new Promise((t,g)=>{var b=n=>{try{m(a.next(n))}catch(u){g(u)}},p=n=>{try{m(a.throw(n))}catch(u){g(u)}},m=n=>n.done?t(n.value):Promise.resolve(n.value).then(b,p);m((a=a.apply(s,e)).next())});import{L as q}from"./LeftSidebar-DIvzo2_q.js";import{_ as G,P as A}from"./ListView-CH98j6XP.js";import{R as H}from"./RefreshButton-BoknG8mI.js";import{_ as J,a as K,b as W,r as d,c as X,d as Y,o as Z,e as x,f as r,n as P,g as i,w as N,u as $,h as c,i as S,j as ee,m as te,t as ae}from"./index-CMQgrs3Q.js";import{_ as oe}from"./Badge.vue_vue_type_script_setup_true_lang-AP7QJAam.js";import{D as le}from"./DatePicker-C2mdXG1R.js";import{_ as se,a as ne}from"./FormControl.vue_vue_type_script_setup_true_lang-DxvH2exx.js";import"./index-mgISJYoh.js";const re={components:{LeftSidebar:q,ListView:G,Pagination:A,RefreshButton:H,FeatherIcon:K,TextInput:se,FormControl:ne,DatePicker:le,Badge:oe,Button:W},setup(){const s=d(!1),e=d([]),a=d([]),t=d(!1),g=d([{label:"Name",key:"name"},{label:"Status",key:"status"},{label:"Date",key:"transaction_date"},{label:"Item",key:"item_name"},{label:"Total",key:"total"}]),b=X({url:"go1_customer.go1_customer.api.api.get_quotation",method:"get"}),p=()=>B(this,null,function*(){try{t.value=!0;const o=yield b.fetch();e.value=o.map(_=>{const R=_.items.map(k=>k.item_name).join(", ");return T(D({},_),{total:String(_.grand_total),item_name:R||"No items",transaction_date:_.transaction_date})}),console.log("Fetched data:",e.value)}catch(o){console.error("Error fetching data:",o)}finally{t.value=!1}}),m=()=>{p()},n=()=>{s.value=!s.value},u=$(),w=o=>{console.log("Row clicked:",o),o&&o.name?u.push({name:"QuotationDetails",params:{id:o.name}}):console.error("Row data is invalid:",o)},y=o=>{a.value=o},C=()=>{v.value="",f.value="",l.value="",h.value=""},v=d(""),f=d(""),l=d(""),h=d(""),O=Y(()=>e.value.filter(o=>{const _=o.name.toLowerCase().includes(v.value.toLowerCase()),R=o.status.toLowerCase().includes(f.value.toLowerCase())||!f.value,k=o.grand_total.toString().replace(/[.,]/g,"").includes(l.value.toString().replace(/[.,]/g,""))||!l.value,F=h.value.split("-").reverse().join("-"),I=o.transaction_date&&o.transaction_date.includes(F);return _&&R&&k&&I})),z=o=>{switch(o){case"Draft":return{theme:"red"};case"Open":return{theme:"blue"};case"Cancelled":return{theme:"Green"};case"Ordered":return{theme:"orange"};default:return{theme:"gray"}}};return Z(()=>{p()}),{isSidebarCollapsed:s,paginatedRows:a,rows:e,columns:g,toggleSidebar:n,OpenClick:w,updatePaginatedRows:y,reload:m,isLoading:t,filterName:v,filterStatus:f,filterTotal:l,filteredRows:O,filterDate:h,resetFilters:C,getStatusTheme:z}}},ie={class:"h-[calc(100vh)] overflow-hidden flex flex-col"},de={class:"main-content"},ce={class:"fiter mb-2 flex gap-3"},me={class:"flex gap-2"},ue={key:0},pe={key:1},fe={class:"font-medium text-gray-700 text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}};function _e(s,e,a,t,g,b){const p=c("LeftSidebar"),m=c("TextInput"),n=c("FormControl"),u=c("DatePicker"),w=c("Button"),y=c("RefreshButton"),C=c("Badge"),v=c("ListView"),f=c("Pagination");return S(),x("div",ie,[r("div",{class:P(["head-layout",{collapsed:t.isSidebarCollapsed}])},e[4]||(e[4]=[r("div",{class:"head-content"},[r("header",{class:"border-b bg-white px-5 py-2.5 sm:px-5 pb-[2.605rem]"},[r("div",{class:"float-left"},"Quotations"),r("div",{class:"float-right"})])],-1)]),2),r("div",{class:P(["layout",{collapsed:t.isSidebarCollapsed}])},[i(p,{class:"z-[8]",isCollapsed:t.isSidebarCollapsed,onToggle:t.toggleSidebar},null,8,["isCollapsed","onToggle"]),r("div",de,[r("div",ce,[i(m,{type:"search",size:"sm",variant:"subtle",placeholder:"Name",modelValue:t.filterName,"onUpdate:modelValue":e[0]||(e[0]=l=>t.filterName=l)},null,8,["modelValue"]),i(n,{type:"select",options:[{},{label:"Draft",value:"Draft"},{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"Partially Ordered",value:"Partially Ordered"},{label:"Ordered",value:"Ordered"},{label:"Lost",value:"Lost"},{label:"Cancelled",value:"Cancelled"},{label:"Expired",value:"Expired"}],size:"sm",variant:"subtle",placeholder:"Status",modelValue:t.filterStatus,"onUpdate:modelValue":e[1]||(e[1]=l=>t.filterStatus=l),class:"w-52"},null,8,["modelValue"]),i(m,{type:"search",size:"sm",variant:"subtle",placeholder:"Total",modelValue:t.filterTotal,"onUpdate:modelValue":e[2]||(e[2]=l=>t.filterTotal=l)},null,8,["modelValue"]),i(u,{class:"border-none",size:"md",variant:"subtle",placeholder:"Date",modelValue:t.filterDate,"onUpdate:modelValue":e[3]||(e[3]=l=>t.filterDate=l)},null,8,["modelValue"]),i(w,{variant:"subtle",theme:"gray",size:"sm",onClick:t.resetFilters},{default:N(()=>e[5]||(e[5]=[ee(" Reset")])),_:1},8,["onClick"]),r("div",me,[i(y,{onRefresh:t.reload,isLoading:t.isLoading},null,8,["onRefresh","isLoading"])])]),i(v,{class:"h-full",columns:t.columns,rows:t.paginatedRows,options:{getRowRoute:l=>({name:"QuotationDetails",params:{id:l.name}}),selectable:!0,showTooltip:!0,resizeColumn:!0,emptyState:{title:"No records found"}},"row-key":"name",onRowClick:t.OpenClick},{cell:N(({item:l,column:h})=>[h.key==="status"?(S(),x("div",ue,[i(C,te(t.getStatusTheme(l),{size:"sm",label:l}),null,16,["label"])])):(S(),x("div",pe,[r("span",fe,ae(l),1)]))]),_:1},8,["columns","rows","options","onRowClick"]),i(f,{rows:t.filteredRows,"onUpdate:paginatedRows":t.updatePaginatedRows},null,8,["rows","onUpdate:paginatedRows"])])],2)])}const xe=J(re,[["render",_e],["__scopeId","data-v-c89fc1e3"]]);export{xe as default};
