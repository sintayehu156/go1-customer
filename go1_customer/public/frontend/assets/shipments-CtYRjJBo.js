var M=Object.defineProperty,j=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var V=(s,e,a)=>e in s?M(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,D=(s,e)=>{for(var a in e||(e={}))O.call(e,a)&&V(s,a,e[a]);if(x)for(var a of x(e))q.call(e,a)&&V(s,a,e[a]);return s},T=(s,e)=>j(s,E(e));var L=(s,e,a)=>new Promise((t,_)=>{var b=n=>{try{c(a.next(n))}catch(u){_(u)}},p=n=>{try{c(a.throw(n))}catch(u){_(u)}},c=n=>n.done?t(n.value):Promise.resolve(n.value).then(b,p);c((a=a.apply(s,e)).next())});import{L as A}from"./LeftSidebar-DIvzo2_q.js";import{R as G}from"./RefreshButton-BoknG8mI.js";import{_ as H,P as J}from"./ListView-CH98j6XP.js";import{_ as K,b as Q,r,c as W,d as X,o as Y,e as S,f as m,n as B,g as i,w as N,u as Z,h as d,i as k,j as $,m as ee,t as te}from"./index-CMQgrs3Q.js";import{_ as ae}from"./Badge.vue_vue_type_script_setup_true_lang-AP7QJAam.js";import{D as oe}from"./DatePicker-C2mdXG1R.js";import{_ as le,a as se}from"./FormControl.vue_vue_type_script_setup_true_lang-DxvH2exx.js";import"./index-mgISJYoh.js";const ne={components:{LeftSidebar:A,ListView:H,Pagination:J,TextInput:le,FormControl:se,Badge:ae,DatePicker:oe,RefreshButton:G,Button:Q},setup(){const s=r(!1),e=r([]),a=r([]),t=r(!1),_=r([{label:"Name",key:"name"},{label:"Status",key:"status"},{label:"Item",key:"item_name"},{label:"Date",key:"posting_date"},{label:"Total",key:"grand_total"}]),b=W({url:"go1_customer.go1_customer.api.api.get_shipments",method:"get"}),p=()=>L(this,null,function*(){try{t.value=!0;const o=yield b.fetch();a.value=o.map(v=>T(D({},v),{total:String(v.total),item_name:v.items.map(R=>R.item_name).join(", ")||"No items"})),console.log("Fetched data:",a.value)}catch(o){console.error("Error fetching data:",o)}finally{t.value=!1}}),c=()=>{p()},n=o=>{s.value=o},u=Z(),C=o=>{console.log("Row clicked:",o),o&&o.name?u.push({name:"ShipmentDetails",params:{id:o.name}}):console.error("Row data is invalid:",o)},w=o=>{e.value=o},y=()=>{g.value="",f.value="",l.value="",h.value=""},g=r(""),f=r(""),l=r(""),h=r(""),z=X(()=>a.value.filter(o=>{const v=o.name.toLowerCase().includes(g.value.toLowerCase()),R=o.status.toLowerCase().includes(f.value.toLowerCase())||!f.value,I=o.grand_total.toString().replace(/[.,]/g,"").includes(l.value.toString().replace(/[.,]/g,""))||!l.value,F=h.value.split("-").reverse().join("-"),U=o.posting_date&&o.posting_date.includes(F);return v&&R&&I&&U})),P=o=>{switch(o){case"Draft":return{theme:"red"};case"Completed":return{theme:"blue"};case"Cancelled":return{theme:"green"};case"Closed":return{theme:"orange"};default:return{theme:"gray"}}};return Y(()=>{p()}),{isSidebarCollapsed:s,rows:a,columns:_,toggleSidebar:n,OpenClick:C,updatePaginatedRows:w,paginatedRows:e,filterName:g,filterStatus:f,filterTotal:l,filteredRows:z,filterDate:h,resetFilters:y,getStatusTheme:P,isLoading:t,reload:c}}},ie={class:"h-[calc(100vh)] overflow-hidden flex flex-col"},re={class:"main-content"},de={class:"filter mb-2 flex gap-3"},ce={class:"flex gap-2"},me={key:0},ue={key:1},pe={class:"font-medium text-gray-700 text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}};function fe(s,e,a,t,_,b){const p=d("LeftSidebar"),c=d("TextInput"),n=d("FormControl"),u=d("DatePicker"),C=d("Button"),w=d("RefreshButton"),y=d("Badge"),g=d("ListView"),f=d("pagination");return k(),S("div",ie,[m("div",{class:B(["head-layout",{collapsed:t.isSidebarCollapsed}])},e[4]||(e[4]=[m("div",{class:"head-content"},[m("header",{class:"border-b bg-white px-5 py-2.5 sm:px-5"}," Shipments ")],-1)]),2),m("div",{class:B(["layout",{collapsed:t.isSidebarCollapsed}])},[i(p,{class:"z-[8]",isCollapsed:t.isSidebarCollapsed,onToggle:t.toggleSidebar},null,8,["isCollapsed","onToggle"]),m("div",re,[m("div",de,[i(c,{type:"search",size:"sm",variant:"subtle",placeholder:"Name",modelValue:t.filterName,"onUpdate:modelValue":e[0]||(e[0]=l=>t.filterName=l)},null,8,["modelValue"]),i(n,{type:"select",options:[{},{label:"Draft",value:"Draft"},{label:"To Bill",value:"To Bill"},{label:"Return Issued",value:"Return Issued"},{label:"Completed",value:"Completed"},{label:"Cancelled",value:"Cancelled"},{label:"Closed",value:"Closed"}],size:"sm",variant:"subtle",placeholder:"Status",modelValue:t.filterStatus,"onUpdate:modelValue":e[1]||(e[1]=l=>t.filterStatus=l),class:"w-52"},null,8,["modelValue"]),i(c,{type:"search",size:"sm",variant:"subtle",placeholder:"Total",modelValue:t.filterTotal,"onUpdate:modelValue":e[2]||(e[2]=l=>t.filterTotal=l)},null,8,["modelValue"]),i(u,{class:"border-none",size:"md",variant:"subtle",placeholder:"Date",modelValue:t.filterDate,"onUpdate:modelValue":e[3]||(e[3]=l=>t.filterDate=l)},null,8,["modelValue"]),i(C,{variant:"subtle",theme:"gray",size:"sm",onClick:t.resetFilters},{default:N(()=>e[5]||(e[5]=[$(" Reset")])),_:1},8,["onClick"]),m("div",ce,[i(w,{onRefresh:t.reload,isLoading:t.isLoading},null,8,["onRefresh","isLoading"])])]),i(g,{class:"h-full",columns:t.columns,rows:t.paginatedRows,options:{getRowRoute:l=>({name:"ShipmentDetails",params:{id:l.name}}),selectable:!0,showTooltip:!0,resizeColumn:!0,emptyState:{title:"No records found"}},"row-key":"name",onRowClick:t.OpenClick},{cell:N(({item:l,column:h})=>[h.key==="status"?(k(),S("div",me,[i(y,ee(t.getStatusTheme(l),{size:"sm",label:l}),null,16,["label"])])):(k(),S("div",ue,[m("span",pe,te(l),1)]))]),_:1},8,["columns","rows","options","onRowClick"]),i(f,{rows:t.filteredRows,"onUpdate:paginatedRows":t.updatePaginatedRows},null,8,["rows","onUpdate:paginatedRows"])])],2)])}const Se=K(ne,[["render",fe],["__scopeId","data-v-b089187b"]]);export{Se as default};
