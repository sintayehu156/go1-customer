var F=Object.defineProperty,M=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var x=(s,e,t)=>e in s?F(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,P=(s,e)=>{for(var t in e||(e={}))E.call(e,t)&&x(s,t,e[t]);if(D)for(var t of D(e))q.call(e,t)&&x(s,t,e[t]);return s},V=(s,e)=>M(s,j(e));var T=(s,e,t)=>new Promise((a,v)=>{var h=n=>{try{c(t.next(n))}catch(m){v(m)}},p=n=>{try{c(t.throw(n))}catch(m){v(m)}},c=n=>n.done?a(n.value):Promise.resolve(n.value).then(h,p);c((t=t.apply(s,e)).next())});import{L as A}from"./LeftSidebar-DIvzo2_q.js";import{_ as G,P as H}from"./ListView-CH98j6XP.js";import{R as J}from"./RefreshButton-BoknG8mI.js";import{_ as K,b as Q,r,c as W,d as X,o as Y,e as S,f as u,n as L,g as i,w as I,u as Z,h as d,i as k,j as $,m as ee,t as ae}from"./index-CMQgrs3Q.js";import{_ as te}from"./Badge.vue_vue_type_script_setup_true_lang-AP7QJAam.js";import{D as oe}from"./DatePicker-C2mdXG1R.js";import{_ as le,a as se}from"./FormControl.vue_vue_type_script_setup_true_lang-DxvH2exx.js";import"./index-mgISJYoh.js";const ne={components:{LeftSidebar:A,ListView:G,Pagination:H,TextInput:le,RefreshButton:J,FormControl:se,Badge:te,DatePicker:oe,Button:Q},setup(){const s=r(!1),e=r([]),t=r(!1),a=r([]),v=r([{label:"Name",key:"name"},{label:"Status",key:"status"},{label:"Item",key:"item_name"},{label:"Date",key:"posting_date"},{label:"Total",key:"grand_total"}]),h=W({url:"go1_customer.go1_customer.api.api.get_salesinvoice",method:"get"}),p=()=>T(this,null,function*(){try{t.value=!0;const o=yield h.fetch();e.value=o.map(b=>V(P({},b),{total:String(b.total),item_name:b.items.map(R=>R.item_name).join(", ")||"No items"})),console.log("Fetched data:",e.value)}catch(o){console.error("Error fetching data:",o)}finally{t.value=!1}}),c=()=>{p()},n=()=>{s.value=!s.value},m=Z(),w=o=>{console.log("Row clicked:",o),o&&o.name?m.push({name:"InvoicesDetail",params:{id:o.name}}):console.error("Row data is invalid:",o)},y=o=>{a.value=o},C=()=>{_.value="",f.value="",l.value="",g.value=""},_=r(""),f=r(""),l=r(""),g=r(""),B=X(()=>e.value.filter(o=>{const b=o.name.toLowerCase().includes(_.value.toLowerCase()),R=o.status.toLowerCase().includes(f.value.toLowerCase())||!f.value,U=o.grand_total.toString().replace(/[.,]/g,"").includes(l.value.toString().replace(/[.,]/g,""))||!l.value,z=g.value.split("-").reverse().join("-"),O=o.posting_date&&o.posting_date.includes(z);return b&&R&&U&&O})),N=o=>{switch(o){case"Draft":return{theme:"red"};case"Overdue":return{theme:"blue"};case"Cancelled":return{theme:"green"};case"Return":return{theme:"orange"};default:return{theme:"gray"}}};return Y(()=>{p()}),{isSidebarCollapsed:s,rows:e,columns:v,toggleSidebar:n,OpenClick:w,updatePaginatedRows:y,paginatedRows:a,filterName:_,filterStatus:f,filterTotal:l,filteredRows:B,filterDate:g,resetFilters:C,getStatusTheme:N,reload:c,isLoading:t}}},ie={class:"h-[calc(100vh)] overflow-hidden flex flex-col"},re={class:"main-content overflow-hidden flex flex-col"},de={class:"filter mb-2 flex gap-3"},ce={class:"refers"},ue={key:0},me={key:1},pe={class:"font-medium text-gray-700 text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}};function fe(s,e,t,a,v,h){const p=d("LeftSidebar"),c=d("TextInput"),n=d("FormControl"),m=d("DatePicker"),w=d("Button"),y=d("RefreshButton"),C=d("Badge"),_=d("ListView"),f=d("Pagination");return k(),S("div",ie,[u("div",{class:L(["head-layout",{collapsed:a.isSidebarCollapsed}])},e[4]||(e[4]=[u("div",{class:"head-content"},[u("header",{class:"border-b bg-white px-5 py-2.5 sm:px-5"}," Invoice ")],-1)]),2),u("div",{class:L(["layout",{collapsed:a.isSidebarCollapsed}])},[i(p,{class:"z-[8]",isCollapsed:a.isSidebarCollapsed,onToggle:a.toggleSidebar},null,8,["isCollapsed","onToggle"]),u("div",re,[u("div",de,[i(c,{type:"search",size:"sm",variant:"subtle",placeholder:"Name",modelValue:a.filterName,"onUpdate:modelValue":e[0]||(e[0]=l=>a.filterName=l)},null,8,["modelValue"]),i(n,{type:"select",options:[{},{label:"Draft",value:"Draft"},{label:"Return",value:"Return"},{label:"Credit Note Issued",value:"Credit Note Issued"},{label:"Partly Paid",value:"Partly Paid"},{label:"Paid",value:"Paid"},{label:"Submitted",value:"Submitted"},{label:"Unpaid",value:"Unpaid"},{label:"Unpaid and Discounted",value:"Unpaid and Discounted"},{label:"Partly Paid and Discounted",value:"Partly Paid and Discounted"},{label:"Cancelled",value:"Cancelled"},{label:"Overdue",value:"Overdue"},{label:"Overdue and Discounted",value:"Overdue and Discounted"},{label:"Internal Transfer",value:"Internal Transfer"}],size:"sm",variant:"subtle",placeholder:"Status",modelValue:a.filterStatus,"onUpdate:modelValue":e[1]||(e[1]=l=>a.filterStatus=l),class:"w-52"},null,8,["modelValue"]),i(c,{type:"search",size:"sm",variant:"subtle",placeholder:"Total",modelValue:a.filterTotal,"onUpdate:modelValue":e[2]||(e[2]=l=>a.filterTotal=l)},null,8,["modelValue"]),i(m,{class:"border-none",size:"md",variant:"subtle",placeholder:"Date",modelValue:a.filterDate,"onUpdate:modelValue":e[3]||(e[3]=l=>a.filterDate=l)},null,8,["modelValue"]),i(w,{variant:"subtle",theme:"gray",size:"sm",onClick:a.resetFilters},{default:I(()=>e[5]||(e[5]=[$(" Reset")])),_:1},8,["onClick"]),u("div",ce,[i(y,{onRefresh:a.reload,isLoading:a.isLoading},null,8,["onRefresh","isLoading"])])]),i(_,{class:"h-full",columns:a.columns,rows:a.paginatedRows,options:{getRowRoute:l=>({name:"InvoiceDetail",params:{id:l.name}}),selectable:!0,showTooltip:!0,resizeColumn:!0,emptyState:{title:"No records found"}},"row-key":"name",onRowClick:a.OpenClick},{cell:I(({item:l,column:g})=>[g.key==="status"?(k(),S("div",ue,[i(C,ee(a.getStatusTheme(l),{size:"sm",label:l}),null,16,["label"])])):(k(),S("div",me,[u("span",pe,ae(l),1)]))]),_:1},8,["columns","rows","options","onRowClick"]),i(f,{rows:a.filteredRows,"onUpdate:paginatedRows":a.updatePaginatedRows},null,8,["rows","onUpdate:paginatedRows"])])],2)])}const Se=K(ne,[["render",fe],["__scopeId","data-v-db98fbfe"]]);export{Se as default};
