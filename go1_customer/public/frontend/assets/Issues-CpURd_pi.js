var O=Object.defineProperty;var x=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var S=(a,e,o)=>e in a?O(a,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[e]=o,L=(a,e)=>{for(var o in e||(e={}))P.call(e,o)&&S(a,o,e[o]);if(x)for(var o of x(e))F.call(e,o)&&S(a,o,e[o]);return a};var B=(a,e,o)=>new Promise((s,_)=>{var g=n=>{try{m(o.next(n))}catch(d){_(d)}},u=n=>{try{m(o.throw(n))}catch(d){_(d)}},m=n=>n.done?s(n.value):Promise.resolve(n.value).then(g,u);m((o=o.apply(a,e)).next())});import{L as U}from"./LeftSidebar-DIvzo2_q.js";import{_ as j,P as D}from"./ListView-CH98j6XP.js";import{R as H}from"./RefreshButton-BoknG8mI.js";import{_ as M,b as E,r as p,c as q,d as A,o as G,e as R,f as i,g as r,w as y,n as V,u as J,h as c,i as k,j as N,m as K,t as Q}from"./index-CMQgrs3Q.js";import{_ as W}from"./Badge.vue_vue_type_script_setup_true_lang-AP7QJAam.js";import{_ as X,a as Y}from"./FormControl.vue_vue_type_script_setup_true_lang-DxvH2exx.js";import"./index-mgISJYoh.js";const Z={components:{LeftSidebar:U,ListView:j,Pagination:D,TextInput:X,FormControl:Y,Badge:W,RefreshButton:H,Button:E},setup(){const a=p(!1),e=p([]),o=p(!1),s=p([]),_=p([{label:"Name",key:"name"},{label:"Status",key:"status"},{label:"Subject",key:"subject"},{label:"Raised By(email)",key:"owner"},{label:"Priority",key:"priority"}]),g=q({url:"go1_customer.go1_customer.api.api.get_issues",method:"get"});console.log("issues",g);const u=()=>B(this,null,function*(){o.value=!0;try{const t=yield g.fetch();e.value=t.map(C=>L({},C)),console.log("Fetched data:",e.value)}catch(t){console.error("Error fetching data:",t)}finally{o.value=!1}}),m=()=>{u()},n=()=>{a.value=!a.value},d=J(),h=()=>{d.push({name:"issueNew"})},v=t=>{console.log("Row clicked:",t),t&&t.name?d.push({name:"IssueDetails",params:{id:t.name}}):console.error("Row data is invalid:",t)},b=t=>{s.value=t},w=()=>{l.value="",f.value=""},l=p(""),f=p(""),T=A(()=>e.value.filter(t=>{const C=t.name.toLowerCase().includes(l.value.toLowerCase()),I=t.status.toLowerCase().includes(f.value.toLowerCase())||!f.value;return C&&I})),z=t=>{switch(t){case"Open":return{theme:"red"};case"Replied":return{theme:"blue"};case"Closed":return{theme:"green"};case"On Hold":return{theme:"orange"};default:return{theme:"gray"}}};return G(()=>{u()}),{isSidebarCollapsed:a,rows:e,columns:_,toggleSidebar:n,OpenClick:v,updatePaginatedRows:b,paginatedRows:s,openCreate:h,filterName:l,filterStatus:f,filteredRows:T,resetFilters:w,getStatusTheme:z,reload:m,isLoading:o}}},$={class:"h-[calc(100vh)] overflow-hidden flex flex-col"},ee={class:"head-content"},se={class:"border-b bg-white px-5 py-6.5 sm:px-5"},oe={class:"float-right -mt-3"},te={class:"main-content"},ae={class:"fiter mb-2 flex gap-3"},le={class:"flex gap-2"},ne={key:0},ie={key:1},re={class:"font-medium text-gray-700 text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}};function de(a,e,o,s,_,g){const u=c("Button"),m=c("LeftSidebar"),n=c("TextInput"),d=c("FormControl"),h=c("RefreshButton"),v=c("Badge"),b=c("ListView"),w=c("Pagination");return k(),R("div",$,[i("div",{class:V(["head-layout",{collapsed:s.isSidebarCollapsed}])},[i("div",ee,[i("header",se,[e[3]||(e[3]=i("div",{class:"float-left -mt-3"},"Issue",-1)),i("div",oe,[r(u,{variant:"solid",theme:"gray",size:"sm",label:"Button",loading:!1,loadingText:null,disabled:!1,link:null,onClick:s.openCreate},{default:y(()=>e[2]||(e[2]=[N(" + Create ")])),_:1},8,["onClick"])])])])],2),i("div",{class:V(["layout",{collapsed:s.isSidebarCollapsed}])},[r(m,{class:"z-[8]",isCollapsed:s.isSidebarCollapsed,onToggle:s.toggleSidebar},null,8,["isCollapsed","onToggle"]),i("div",te,[i("div",ae,[r(n,{type:"search",size:"sm",variant:"subtle",placeholder:"Name",modelValue:s.filterName,"onUpdate:modelValue":e[0]||(e[0]=l=>s.filterName=l)},null,8,["modelValue"]),r(d,{type:"select",options:[{},{label:"Open",value:"Open"},{label:"On Hold",value:"On Hold"},{label:"Replied",value:"Replied"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}],size:"sm",variant:"subtle",placeholder:"Status",modelValue:s.filterStatus,"onUpdate:modelValue":e[1]||(e[1]=l=>s.filterStatus=l),class:"w-52"},null,8,["modelValue"]),r(u,{variant:"subtle",theme:"gray",size:"sm",onClick:s.resetFilters},{default:y(()=>e[4]||(e[4]=[N(" Reset")])),_:1},8,["onClick"]),i("div",le,[r(h,{onRefresh:s.reload,isLoading:s.isLoading},null,8,["onRefresh","isLoading"])])]),r(b,{class:"h-full",columns:s.columns,rows:s.paginatedRows,options:{getRowRoute:l=>({name:"IssueDetails",params:{id:l.name}}),selectable:!0,showTooltip:!0,resizeColumn:!0,emptyState:{title:"No records found"}},"row-key":"name",onRowClick:s.OpenClick},{cell:y(({item:l,column:f})=>[f.key==="status"?(k(),R("div",ne,[r(v,K(s.getStatusTheme(l),{size:"sm",label:l}),null,16,["label"])])):(k(),R("div",ie,[i("span",re,Q(l),1)]))]),_:1},8,["columns","rows","options","onRowClick"]),r(w,{rows:s.filteredRows,"onUpdate:paginatedRows":s.updatePaginatedRows},null,8,["rows","onUpdate:paginatedRows"])])],2)])}const ve=M(Z,[["render",de],["__scopeId","data-v-a98d2baa"]]);export{ve as default};
