var M=Object.defineProperty,j=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var D=(s,e,a)=>e in s?M(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,T=(s,e)=>{for(var a in e||(e={}))E.call(e,a)&&D(s,a,e[a]);if(S)for(var a of S(e))G.call(e,a)&&D(s,a,e[a]);return s},V=(s,e)=>j(s,H(e));var B=(s,e,a)=>new Promise((t,_)=>{var h=n=>{try{c(a.next(n))}catch(u){_(u)}},p=n=>{try{c(a.throw(n))}catch(u){_(u)}},c=n=>n.done?t(n.value):Promise.resolve(n.value).then(h,p);c((a=a.apply(s,e)).next())});import{L as q}from"./LeftSidebar-DIvzo2_q.js";import{_ as A,P as J}from"./ListView-CH98j6XP.js";import{R as K}from"./RefreshButton-BoknG8mI.js";import{_ as Q,b as W,r as i,c as X,d as Y,o as Z,e as k,f as m,n as L,g as r,w as N,u as $,h as d,i as x,j as ee,m as te,t as ae}from"./index-CMQgrs3Q.js";import{_ as oe}from"./Badge.vue_vue_type_script_setup_true_lang-AP7QJAam.js";import{D as le}from"./DatePicker-C2mdXG1R.js";import{_ as se,a as ne}from"./FormControl.vue_vue_type_script_setup_true_lang-DxvH2exx.js";import"./index-mgISJYoh.js";const re={components:{LeftSidebar:q,ListView:A,Pagination:J,TextInput:se,FormControl:ne,Badge:oe,DatePicker:le,RefreshButton:K,Button:W},setup(){const s=i(!1),e=i([]),a=i([]),t=i(!1),_=i([{label:"Name",key:"name"},{label:"Status",key:"status"},{label:"Date",key:"transaction_date"},{label:"Item",key:"item_name"},{label:"Total",key:"grand_total"}]),h=X({url:"go1_customer.go1_customer.api.api.get_salesorder",method:"get"}),p=()=>B(this,null,function*(){try{t.value=!0;const o=yield h.fetch();e.value=o.map(b=>V(T({},b),{total:String(b.total),item_name:b.items.map(R=>R.item_name).join(", ")||"No items"})),console.log("Fetched data:",e.value)}catch(o){console.error("Error fetching data:",o)}finally{t.value=!1}}),c=()=>{p()},n=()=>{s.value=!s.value},u=$(),C=o=>{console.log("Row clicked:",o),o&&o.name?u.push({name:"OrderDetails",params:{id:o.name}}):console.error("Row data is invalid:",o)},w=o=>{a.value=o},y=()=>{v.value="",f.value="",l.value="",g.value=""},v=i(""),f=i(""),l=i(""),g=i(""),z=()=>{isItemBoxVisible.value=!isItemBoxVisible.value},O=Y(()=>e.value.filter(o=>{const b=o.name.toLowerCase().includes(v.value.toLowerCase()),R=o.status.toLowerCase().includes(f.value.toLowerCase())||!f.value,P=o.total.toString().replace(/[.,]/g,"").includes(l.value.toString().replace(/[.,]/g,""))||!l.value,F=g.value.split("-").reverse().join("-"),U=o.transaction_date&&o.transaction_date.includes(F);return b&&R&&P&&U})),I=o=>{switch(o){case"Draft":return{theme:"red"};case"Completed":return{theme:"blue"};case"Cancelled":return{theme:"Green"};case"On Hold":return{theme:"orange"};default:return{theme:"gray"}}};return Z(()=>{p()}),{isSidebarCollapsed:s,rows:e,paginatedRows:a,columns:_,toggleItemBox:z,toggleSidebar:n,OpenClick:C,updatePaginatedRows:w,filterName:v,filterStatus:f,filterTotal:l,filteredRows:O,filterDate:g,resetFilters:y,getStatusTheme:I,reload:c,isLoading:t}}},ie={class:"h-[calc(100vh)] overflow-hidden flex flex-col"},de={class:"main-content"},ce={class:"fiter mb-2 flex gap-3"},me={class:"flex gap-2"},ue={key:0},pe={key:1},fe={class:"font-medium text-gray-700 text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}};function _e(s,e,a,t,_,h){const p=d("LeftSidebar"),c=d("TextInput"),n=d("FormControl"),u=d("DatePicker"),C=d("Button"),w=d("RefreshButton"),y=d("Badge"),v=d("ListView"),f=d("pagination");return x(),k("div",ie,[m("div",{class:L(["head-layout",{collapsed:t.isSidebarCollapsed}])},e[4]||(e[4]=[m("div",{class:"head-content"},[m("header",{class:"border-b bg-white px-5 py-2.5 sm:px-5"}," Sales Order ")],-1)]),2),m("div",{class:L(["layout",{collapsed:t.isSidebarCollapsed}])},[r(p,{class:"z-[8]",isCollapsed:t.isSidebarCollapsed,onToggle:t.toggleSidebar},null,8,["isCollapsed","onToggle"]),m("div",de,[m("div",ce,[r(c,{type:"search",size:"sm",variant:"subtle",placeholder:"Name",modelValue:t.filterName,"onUpdate:modelValue":e[0]||(e[0]=l=>t.filterName=l)},null,8,["modelValue"]),r(n,{type:"select",options:[{},{label:"Draft",value:"Draft"},{label:"On Hold",value:"On Hold"},{label:"To Deliver and Bill",value:"To Deliver and Bill"},{label:"Completed",value:"Completed"},{label:"To Deliver",value:"To Deliver"},{label:"To Bill",value:"To Bill"},{label:"Cancelled",value:"Cancelled"},{label:"Closed",value:"Closed"}],size:"sm",variant:"subtle",placeholder:"Status",modelValue:t.filterStatus,"onUpdate:modelValue":e[1]||(e[1]=l=>t.filterStatus=l),class:"w-52"},null,8,["modelValue"]),r(c,{type:"search",size:"sm",variant:"subtle",placeholder:"Total",modelValue:t.filterTotal,"onUpdate:modelValue":e[2]||(e[2]=l=>t.filterTotal=l)},null,8,["modelValue"]),r(u,{class:"border-none",size:"md",variant:"subtle",placeholder:"Date",modelValue:t.filterDate,"onUpdate:modelValue":e[3]||(e[3]=l=>t.filterDate=l)},null,8,["modelValue"]),r(C,{variant:"subtle",theme:"gray",size:"sm",onClick:t.resetFilters},{default:N(()=>e[5]||(e[5]=[ee(" Reset")])),_:1},8,["onClick"]),m("div",me,[r(w,{onRefresh:t.reload,isLoading:t.isLoading},null,8,["onRefresh","isLoading"])])]),r(v,{class:"h-full",columns:t.columns,rows:t.paginatedRows,options:{getRowRoute:l=>({name:"OrderDetails",params:{id:l.name}}),selectable:!0,showTooltip:!0,resizeColumn:!0,emptyState:{title:"No records found"}},"row-key":"name",onRowClick:t.OpenClick},{cell:N(({item:l,column:g})=>[g.key==="status"?(x(),k("div",ue,[r(y,te(t.getStatusTheme(l),{size:"sm",label:l}),null,16,["label"])])):(x(),k("div",pe,[m("span",fe,ae(l),1)]))]),_:1},8,["columns","rows","options","onRowClick"]),r(f,{rows:t.filteredRows,"onUpdate:paginatedRows":t.updatePaginatedRows},null,8,["rows","onUpdate:paginatedRows"])])],2)])}const xe=Q(re,[["render",_e],["__scopeId","data-v-35418bc3"]]);export{xe as default};
